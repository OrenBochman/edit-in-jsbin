<link rel="import" href="../polymer/polymer.html">
<!--
`<edit-in-jsbin>` link to the great Jsbin 
@demo demo.html
-->
<dom-module id="edit-in-jsbin">
  <template>
    <iron-ajax auto url="{{url}}" handle-as="text" last-response="{{got}}"></iron-ajax>
    <form target="newbin" action="http://jsbin.com/" method="post">
      <input type="hidden" name="html" value="{{go}}" />
      <input type="image" alt="Edit in JSbin" src="jsbin.svg" />
    </form>
  </template>
</dom-module>
<script>
  (function () {
    Polymer({
      is: 'edit-in-jsbin',
      properties: {
        go:{
          type:String,
          computed:"addBase(got,url)"
        },
        url:String
      },
      _addBase: function(got,url) {
        base = '<base href="' + url.match(/(.*)\//)[0] + '">';     
        return got.replace('<head>','<head>'+ base);
      }
    });
  })();
</script>
